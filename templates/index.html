{% extends "layout.html" %}
{% block content %}
<div class="row g-3">
  <div class="col-12">
    <div class="card text-center p-3">
      <div class="muted">إجراء جديد</div>
      <a href="{{ url_for('add_batch') }}" class="btn btn-success mt-2"><i class="bi bi-plus-circle"></i> إضافة دفعة</a>
    </div>
  </div>
</div>

{% if batches %}
<div class="table-responsive p-2">
<table class="table table-hover align-middle text-center">
  <thead class="table-success">
    <tr>
      <th>الاسم</th>
      <th>السلالة</th>
      <th  style="width: 200px !important;">تاريخ البداية</th>
      <th>عدد الكتاكيت</th>
      <th>عمر الدورة</th>
      <th>إجراءات</th>
    </tr>
  </thead>
  <tbody>
    {% for b in batches %}
    <tr>
      <td>{{ b['name'] }}</td>
      <td>{{ b['breed'] }}</td>
      <td class="date-col" style="width: 150px;">{{ b['start_date'] }}</td>
      <td>{{ b['initial_count'] }}</td>
      <td>
        {% if b['age'] is not none %}
          <span class="batch-age">{{ b['age'] }} يوم</span>
        {% else %}
          <span class="muted">--</span>
        {% endif %}
      </td>
      <td>
        
        <div class="btn-group actions-grid" dir="ltr" role="group" aria-label="إجراءات الدفعة">
          <a href="{{ url_for('delete_batch', batch_id=b['id']) }}" class="btn btn-sm btn-outline-danger" onclick="return confirm('هل أنت متأكد من حذف هذه الدفعة وجميع بياناتها؟');"><i class="bi bi-trash"></i></a>
          
          <a href="{{ url_for('edit_batch', batch_id=b['id']) }}" class="btn btn-sm btn-outline-warning"><i class="bi bi-pencil"></i></a>
        
          <a href="{{ url_for('report', batch_id=b['id']) }}" class="btn btn-sm btn-outline-info"><i class="bi bi-graph-up"></i></a>
          <a href="{{ url_for('view_batch', batch_id=b['id']) }}" class="btn btn-sm btn-outline-primary"><i class="bi bi-eye"></i></a>
        </div>
        
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>
 </div>
{% else %}
<p>لا توجد دفعات بعد.</p>
{% endif %}
{% endblock %}
